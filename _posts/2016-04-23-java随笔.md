---
layout: post
title: JVM随笔
category: 杂项
tags: JVM
keywords:
description:
---

### 查看JVM默认启动参数

      java -XX:+PrintFlagsFinal -version

### 设置方法区（永久代）大小

      -XX:PermSize=10M -XX:MaxPermSize=10M

在JDK1.8之后使用 -XX:MaxMetaspaceSize=128m  设置元空间大小（JVM参数PermSize 和 MaxPermSize会被忽略，当前在启动时会有警告信息）

## 设置GC日志输出

        -XX:+PrintGC  简略信息输出
        -XX:+PrintGCDetails    详细信息输出
        -XX:+PrintGCTimeStamps   gc时间打印
        -XX:+PrintGCApplicationStoppedTime   停顿时间
        -XX:+PrintGCApplicationConcurrentTime 打印每次垃圾回收前,程序未中断的执行时间
        -XX:+PrintHeapAtGC	打印GC前后的详细堆栈信息
        -Xloggc:filename	把相关日志信息记录到文件以便分析.
        -XX:+PrintClassHistogram 垃圾回收前打印类信息柱状图
        -XX:+PrintTenuringDistribution	  查看每次minor GC后新的存活周期的阈值
        -XX:+PrintTLAB   查看TLAB空间的使用情况



## JDK8 默认堆大小
初始化 128M，最大2G,且默认使用 Parallel 垃圾收集器(标记整理)

 > uintx InitialHeapSize                          := 134217728
 > uintx MaxHeapSize                              := 2147483648
 > bool UseParallelGC                            := true
 > bool UseParallelOldGC                          = true

JDK8元空间说明：

http://caoyaojun1988-163-com.iteye.com/blog/1969853

http://www.infoq.com/cn/articles/Java-PERMGEN-Removed

http://www.cnblogs.com/redcreen/archive/2011/05/04/2037057.html

# G1垃圾收集器GC日志说明

[https://blogs.oracle.com/poonam/understanding-g1-gc-logs](https://blogs.oracle.com/poonam/understanding-g1-gc-logs)

# arraylist get(负数) 抛出 IndexOutOfBoundsException 没有栈异常信息

# long 转 int 可能为负数

3421665166L 强转为 int 输出为 -873302130


# fullGC 过多 导致 用户线程暂停，zk心跳异常

日志打了一半，后续既没有info日志，也没有异常日志


# jar 包 release 版本以前可以覆盖，导致本地仓库的jar包是老版本，使用rources 包是最新的，查看包的源码是没有问题的，
但是运行一段时间后，执行到调用该方法的地方，则报错，无此方法。
