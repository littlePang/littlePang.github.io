---
layout: post
title: linux命令随笔
category: 杂项
tags: linux
keywords:
description:
---

### grep 输出匹配内容
    grep -oE sub[0-9]{15} log

> -o 只输出匹配内容

> -E 扩展的正则表达式匹配

### 分组统计数量
sort file | uniq -c

## sort 参数

      -k ： 按照指定key进行排下
      -r ： revert，倒序
      -n ： number，将用于排序的字符串列当作数字进行处理

# ssh 保存known_host,且不询问是否继续连接新地址

        在 .ssh/config 文件中加入

        host *

        UserKnownHostsFile /dev/null

        StrictHostKeyChecking no

## top 与 free 中的 buffers 和 cached

linux 会将空闲内存用作磁盘文件的缓存使用，用以提升读取速度。

* buffers : 是正在执行的I/O操作的缓冲
* cached : 是已经完成的I/O操作的缓存

参考：

[https://serverfault.com/questions/23433/in-linux-what-is-the-difference-between-buffers-and-cache-reported-by-the-f](https://serverfault.com/questions/23433/in-linux-what-is-the-difference-between-buffers-and-cache-reported-by-the-f)

[https://askubuntu.com/questions/198549/what-is-cached-in-the-top-command](https://askubuntu.com/questions/198549/what-is-cached-in-the-top-command)

# /tmp 默认删除时间

http://www.opsers.org/base/clean-up-on-the-linux-system-tmp-folder-you-may-want-to-know.html


# 查找指定文件目录将文件压缩

        #!/bin/sh
        for logfile in $(find $filePath -regex ".+[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9].*.log")
        do
         echo $logfile
        done

# curl 命令

增加用户名密码鉴权

curl -X POST --user username:password 'http:example.com'

# 查看进程启动时间和运行时间

        ps -eo pid,lstart 启动时间
        ps -eo pid,etime   运行多长时间.
        ps -eo pid,lstart,etime | grep 进程id

# 随机生成密码

      openssl rand -base64 18

# shell 字符串操作

${str#} 表示从左边开始删除字符，# 后面跟指定字符串或者通配符，例如 str=xiaomo.wj, ${str#xi}结果为 aomo.wj , ${str#*.} 结果为 wj , 一个 # 表示非贪婪模式， ## 表示贪婪模式, str='/a/b/c/d/e', ${str#*/} 结果为 a/b/c/d/e ， ${str##*/} 结果为 e

${str%} 表示从右边开始删除,% 后面是匹配的后缀字符串。

http://www.cnblogs.com/myitm/archive/2012/07/05/2577416.html

http://www.cnblogs.com/pengdonglin137/p/3272361.html


# 获取所有 es 索引

      curl -XGET 127.0.0.1:9200/_cat/indices
